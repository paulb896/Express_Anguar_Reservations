<div ng-controller="placeSearchController" ng-init="initialize();">
    <table class="place-table">
        <tr ng-show="false">
            <td>
                <h2 class="place-header">City</h2>

            </td>
            <td>
                <input ng-model="citySearch" type="input" class="city-search"/>
            </td>
            <td>
                <div class="found-cities">
                    <span ng-repeat="city in PageState.cities" ng-click="updateCity(city)"
                          class="floatingTile city-result">
                        {{city.name}}
                    </span>
                </div>
            </td>
        </tr>
        <tr>
            <td><h2 class="place-header">Find {{UserSelection.placeType}}</h2></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td colspan="2"><input ng-model="placeSearch" type="input" class="place-search"/></td>
            <td>
                <div class="found-place-types">
                    <div ng-repeat="placeType in PageState.placeTypesShort" ng-click="updatePlaceType(placeSearch, placeType.name)"
                         ng-class="placeType.name"
                         class="place-type">
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td colspan="3">
                <ul class="found-places">

                    <li ng-hide="PageState.places.length" class="place-result">Search results will show here</li>
                    <li class="place-result" ng-show="PageState.resultSetPage > 0" ng-click="PageState.resultSetPage = PageState.resultSetPage - 1;">Page Back</li>
                    <li ng-repeat="place in PageState.places | visibleResults:PageState.resultSetPage:PageState.resultPageSize" ng-click="updatePlace(place)"
                          class="place-result"
                         >
                        {{place.name}}<img class="place-icon" ng-src="{{place.icon}}"><span ng-bind="place.rating"></span>
                    </li>
                    <li class="place-result" ng-show="PageState.places.length > ((PageState.resultSetPage+1) * PageState.resultPageSize)" ng-click="PageState.resultSetPage = PageState.resultSetPage + 1;">Page Forward</li>
                </ul>
            </td>
        </tr>
    </table>
</div>